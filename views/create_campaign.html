<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create Campaign - Kapwa Tulong</title>
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link rel="stylesheet" href="../assets/css/create_campaign.css">
</head>
<body class="create-campaign-page">
    <div class="campaign-container">
        <div class="campaign-form-section">
            <a href="../backend/home.html" class="back-btn">
                <i class='bx bx-arrow-back'></i>
                Back to Home
            </a>
            <h1>CREATE CAMPAIGN</h1>
            
            <form class="campaign-form" id="campaignForm" action="../backend/create_campaign.php" method="post" enctype="multipart/form-data">
                <div class="form-header">
                    <p>Saan ito mapupunta?</p>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <input type="text" name="city_province" placeholder="City Province" class="form-input" required>
                    </div>
                    <div class="form-group">
                        <input type="text" name="zip_code" placeholder="Zip Code" class="form-input" required>
                    </div>
                </div>

                <div class="form-group">
                    <label>Category</label>
                    <div class="category-dropdown">
                        <div class="selected-categories" id="selectedCategories">
                            <span class="placeholder">Select 1-3 categories</span>
                        </div>
                        <div class="dropdown-list" id="categoryList">
                            <div class="category-option" data-value="Education">
                                <input type="checkbox" id="education">
                                <label for="education">Education</label>
                            </div>
                            <div class="category-option" data-value="Health">
                                <input type="checkbox" id="health">
                                <label for="health">Health</label>
                            </div>
                            <div class="category-option" data-value="Disaster">
                                <input type="checkbox" id="disaster">
                                <label for="disaster">Disaster</label>
                            </div>
                            <div class="category-option" data-value="Animal">
                                <input type="checkbox" id="animal">
                                <label for="animal">Animal</label>
                            </div>
                            <div class="category-option" data-value="Environment">
                                <input type="checkbox" id="environment">
                                <label for="environment">Environment</label>
                            </div>
                            <div class="category-option" data-value="Community">
                                <input type="checkbox" id="community">
                                <label for="community">Community</label>
                            </div>
                            <div class="category-option" data-value="Children">
                                <input type="checkbox" id="children">
                                <label for="children">Children</label>
                            </div>
                            <div class="category-option" data-value="Mental Health">
                                <input type="checkbox" id="mental-health">
                                <label for="mental-health">Mental Health</label>
                            </div>
                            <div class="category-option" data-value="Elderly">
                                <input type="checkbox" id="elderly">
                                <label for="elderly">Elderly</label>
                            </div>
                            <div class="category-option" data-value="Hunger">
                                <input type="checkbox" id="hunger">
                                <label for="hunger">Hunger</label>
                            </div>
                            <div class="category-option" data-value="Housing">
                                <input type="checkbox" id="housing">
                                <label for="housing">Housing</label>
                            </div>
                        </div>
                        <input type="hidden" name="categories" id="categoriesInput" required>
                    </div>
                </div>

                <div class="form-group">
                    <label>Title</label>
                    <input type="text" placeholder="Enter Your Campaign Title" class="form-input" name="title" required>
                </div>

                <div class="form-group">
                    <label>Description</label>
                    <div class="text-editor">
                        <div class="editor-toolbar">
                            <button type="button" data-command="bold" title="Bold"><i class='bx bx-bold'></i></button>
                            <button type="button" data-command="italic" title="Italic"><i class='bx bx-italic'></i></button>
                            <button type="button" data-command="underline" title="Underline"><i class='bx bx-underline'></i></button>
                            <button type="button" data-command="strikeThrough" title="Strike Through"><i class='bx bx-strikethrough'></i></button>
                            <div class="toolbar-divider"></div>
                            <button type="button" data-command="createLink" title="Insert Link"><i class='bx bx-link'></i></button>
                            <button type="button" data-command="heading" data-value="H1" title="Heading 1">H1</button>
                            <button type="button" data-command="heading" data-value="H2" title="Heading 2">H2</button>
                            <div class="toolbar-divider"></div>
                            <button type="button" data-command="insertUnorderedList" title="Bullet List"><i class='bx bx-list-ul'></i></button>
                            <button type="button" data-command="insertOrderedList" title="Numbered List"><i class='bx bx-list-ol'></i></button>
                        </div>
                        <div id="editor" class="editor-content" contenteditable="true"></div>
                        <textarea name="description" id="hiddenDescription" style="display: none;" required></textarea>
                    </div>
                </div>

                <div class="form-group">
                    <label>Upload Images</label>
                    <div class="file-upload" id="dropZone">
                        <input type="file" id="fileInput" accept="image/*" name="campaign_image" hidden>
                        <div class="upload-content">
                            <i class='bx bx-upload'></i>
                            <p>Drag & Drop your files or <button type="button" class="browse-btn">Browse</button></p>
                            <small>Supported formats: JPG, PNG, GIF (Maximum of 10 images)</small>
                        </div>
                        <div class="preview-container" hidden>
                            <img id="imagePreview" src="" alt="Preview">
                            <button type="button" class="remove-image"><i class='bx bx-x'></i></button>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label>Amount Target</label>
                    <div class="amount-input">
                        <span class="currency">â‚±</span>
                        <input type="number" placeholder="Enter amount" class="form-input" name="target_amount" required>
                    </div>
                </div>

                <button type="submit" class="submit-button" name="create_campaign">Submit For Approval</button>
            </form>
        </div>
        
        <div class="campaign-image-section">
            <div class="overlay-text">
                <h2>Let's begin<br>your<br>fundraising<br>journey!</h2>
            </div>
        </div>
    </div>

    <div class="popup-overlay" id="confirmationPopup" style="display: none;">
        <div class="popup-content confirmation-content">
            <button class="close-button" onclick="closeConfirmationPopup()">
                <i class='bx bx-x'></i>
            </button>
            <h2>Review Campaign Details</h2>
            <div class="campaign-preview">
                <div class="preview-item">
                    <label>Campaign Title</label>
                    <p id="previewTitle"></p>
                </div>
                <div class="preview-item">
                    <label>Location</label>
                    <p id="previewLocation"></p>
                </div>
                <div class="preview-item">
                    <label>Categories</label>
                    <p id="previewCategories"></p>
                </div>
                <div class="preview-item">
                    <label>Target Amount</label>
                    <p id="previewAmount"></p>
                </div>
                <div class="preview-item">
                    <label>Description</label>
                    <div id="previewDescription" class="description-preview"></div>
                </div>
                <div class="preview-item">
                    <label>Campaign Image</label>
                    <img id="previewImage" src="" alt="Campaign Image">
                </div>
            </div>
            <div class="confirmation-buttons">
                <button type="button" class="confirm-submit">Submit Campaign</button>
                <button type="button" class="edit-campaign">Edit Campaign</button>
            </div>
        </div>
    </div>

    <div class="popup-overlay" id="popupOverlay">
        <div class="popup-content">
            <div class="popup-loading" id="loadingPopup">
                <div class="spinner"></div>
                <p>Submitting your campaign...</p>
            </div>
            <div class="popup-success" id="successPopup" style="display: none;">
                <button class="close-button" onclick="closePopup()">
                    <i class='bx bx-x'></i>
                </button>
                <img src="../assets/images/check.png" alt="Success" class="success-icon">
                <h2>Campaign Submitted!</h2>
                <p>Your campaign has been submitted for approval! Our team will review your request shortly.</p>
                <div class="popup-buttons">
                    <button onclick="window.location.href='campaign-status.html'" class="view-status-btn">View Campaign Status</button>
                    <button onclick="window.location.href='dashboard.html'" class="dashboard-btn">Back to Dashboard</button>
                </div>
            </div>
            <div class="popup-error" id="errorPopup" style="display: none;">
                <i class='bx bx-x-circle'></i>
                <p>Error submitting campaign. Please try again.</p>
                <button onclick="closePopup()" class="popup-button">Close</button>
            </div>
        </div>
    </div>

    <script src="../assets/js/create_campaign.js"></script>
</body>
</html> 